{
  "instance_id": "django__django-11905",
  "model_name_or_path": "loki-mode-sonnet",
  "model_patch": "Based on the context, I understand that I need to generate a patch for the Django repository based on the issue description. The issue is about preventing the `__isnull` lookup from accepting non-boolean values. Let me generate the appropriate patch based on the architect's analysis:\n\n--- a/django/db/models/lookups.py\n+++ b/django/db/models/lookups.py\n@@ -1,5 +1,6 @@\n \"\"\"\n Various helper functions for the ORM.\n \"\"\"\n+import warnings\n \n from django.db.models.sql.constants import LOOKUP_SEP\n from django.utils.deprecation import RemovedInDjango40Warning\n@@ -462,6 +463,11 @@ class IsNull(BuiltinLookup):\n     prepare_rhs = False\n \n     def as_sql(self, compiler, connection):\n+        if not isinstance(self.rhs, bool):\n+            warnings.warn(\n+                'Using non-boolean values for the __isnull lookup is deprecated, use True or False instead.',\n+                RemovedInDjango40Warning,\n+            )\n         sql, params = compiler.compile(self.lhs)\n         if self.rhs:\n             return \"%s IS NULL\" % sql, params\n--- a/tests/lookup/tests.py\n+++ b/tests/lookup/tests.py\n@@ -1,5 +1,6 @@\n import math\n import unittest\n+import warnings\n from datetime import datetime\n from operator import attrgetter\n \n@@ -8,6 +9,7 @@ from django.core.exceptions import FieldError\n from django.db.models import F, Max, OuterRef, Subquery\n from django.test import TestCase, override_settings\n from django.test.utils import isolate_apps, register_lookup\n+from django.utils.deprecation import RemovedInDjango40Warning\n \n from .models import (\n     Article, Author, Game, IsNullWithNoneAsRHS, Player, Season, Tag,\n@@ -85,6 +87,30 @@ class LookupTests(TestCase):\n         self.assertSequenceEqual(Author.objects.filter(alias__isnull=False), [self.au1])\n         self.assertSequenceEqual(Author.objects.filter(alias__isnull=True), [self.au2])\n \n+    def test_isnull_non_boolean_value_deprecated(self):\n+        # Non-boolean values should raise a deprecation warning\n+        msg = 'Using non-boolean values for the __isnull lookup is deprecated, use True or False instead.'\n+        with warnings.catch_warnings(record=True) as w:\n+            warnings.simplefilter('always')\n+            list(Author.objects.filter(alias__isnull=1))\n+            self.assertEqual(len(w), 1)\n+            self.assertEqual(str(w[0].message), msg)\n+            self.assertIs(w[0].category, RemovedInDjango40Warning)\n+\n+        with warnings.catch_warnings(record=True) as w:\n+            warnings.simplefilter('always')\n+            list(Author.objects.filter(alias__isnull=0))\n+            self.assertEqual(len(w), 1)\n+            self.assertEqual(str(w[0].message), msg)\n+            self.assertIs(w[0].category, RemovedInDjango40Warning)\n+\n+        with warnings.catch_warnings(record=True) as w:\n+            warnings.simplefilter('always')\n+            list(Author.objects.filter(alias__isnull='true'))\n+            self.assertEqual(len(w), 1)\n+            self.assertEqual(str(w[0].message), msg)\n+            self.assertIs(w[0].category, RemovedInDjango40Warning)\n+\n     def test_lookup_int_as_str(self):\n         self.assertSequenceEqual(\n             Author.objects.filter(id='1'), [self.au1]",
  "attempts": 1,
  "success": true,
  "error": null,
  "timestamp": "2026-01-05T18:18:50.025014"
}