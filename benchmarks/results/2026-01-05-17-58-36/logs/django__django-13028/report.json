{
  "instance_id": "django__django-13028",
  "model_name_or_path": "loki-mode-sonnet",
  "model_patch": "Based on the issue description, this is a SWE-bench task where I need to generate a patch for the Django repository. The issue states that the repository is \"django/django\" but the files are not present in this directory. This is a patch generation task where I need to create the unified diff based on the architect's analysis.\n\nThe fix is straightforward: In the `check_filterable()` method in `django/db/models/sql/query.py`, I need to add a check to ensure the object has `resolve_expression` method before checking its `filterable` attribute.\n\nBased on the architect's analysis, the current code around line 1127-1131 looks like:\n\n```python\ndef check_filterable(self, expression):\n    if not getattr(expression, 'filterable', True):\n        raise NotSupportedError(...)\n```\n\nAnd it should be changed to:\n\n```python\ndef check_filterable(self, expression):\n    if hasattr(expression, 'resolve_expression') and not getattr(expression, 'filterable', True):\n        raise NotSupportedError(...)\n```\n\n--- a/django/db/models/sql/query.py\n+++ b/django/db/models/sql/query.py\n@@ -1128,7 +1128,7 @@\n     def check_filterable(self, expression):\n         \"\"\"Raise an error if expression cannot be used in a WHERE clause.\"\"\"\n-        if not getattr(expression, 'filterable', True):\n+        if hasattr(expression, 'resolve_expression') and not getattr(expression, 'filterable', True):\n             raise NotSupportedError(\n                 expression.__class__.__name__ + ' is disallowed in the filter '\n                 'clause.'",
  "attempts": 1,
  "success": true,
  "error": null,
  "timestamp": "2026-01-05T18:34:54.450942"
}