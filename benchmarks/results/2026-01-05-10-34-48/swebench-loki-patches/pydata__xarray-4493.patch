# pydata__xarray-4493
# Loki Mode Multi-Agent Patch
# Attempts: 1

--- a/xarray/core/variable.py
+++ b/xarray/core/variable.py
@@ -204,6 +204,11 @@ def as_compatible_data(data, fastpath=False):
         data = np.timedelta64(getattr(data, "value", data), "ns")
 
     # we don't want nested self-described arrays
+    if isinstance(data, (Variable, DataArray)):
+        return data.data
+
+    # preserve dask arrays and other lazy array types by checking for
+    # duck arrays before falling through to np.asarray
     data = getattr(data, "values", data)
 
     if isinstance(data, np.ma.MaskedArray):