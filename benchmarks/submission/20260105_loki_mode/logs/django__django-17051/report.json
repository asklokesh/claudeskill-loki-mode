{
  "instance_id": "django__django-17051",
  "model_name_or_path": "loki-mode-sonnet",
  "model_patch": "Based on the architect's analysis and the issue description, I'll generate the patch for the Django repository. The key information is:\n1. The issue is in `django/db/models/query.py` around line 1840\n2. Need to change the condition from `on_conflict is None` to `on_conflict is None or on_conflict == OnConflict.UPDATE`\n3. This allows returning IDs when using `update_conflicts=True`\n\n--- a/django/db/models/query.py\n+++ b/django/db/models/query.py\n@@ -1837,7 +1837,7 @@\n                     unique_fields=unique_fields,\n                 )\n \n-            if on_conflict is None:\n+            if on_conflict is None or on_conflict == OnConflict.UPDATE:\n                 # Only return the ids if we haven't ignored or updated any rows.\n                 returning_fields = opts.db_returning_fields\n             else:",
  "attempts": 1,
  "success": true,
  "error": null,
  "timestamp": "2026-01-05T19:28:04.745687"
}