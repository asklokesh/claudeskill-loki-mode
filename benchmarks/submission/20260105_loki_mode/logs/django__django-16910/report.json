{
  "instance_id": "django__django-16910",
  "model_name_or_path": "loki-mode-sonnet",
  "model_patch": "Based on the issue description, this appears to be a SWE-bench task where I need to generate a patch for a Django issue. Since this is not a Django repository, I need to create the patch based on my understanding of Django's codebase and the issue description.\n\nThe issue is that `QuerySet.only()` doesn't properly limit fields when used with `select_related()` on a reverse OneToOneField relation in Django 4.2, causing a regression from 4.1.\n\nLet me generate the patch:\n\n--- a/django/db/models/sql/query.py\n+++ b/django/db/models/sql/query.py\n@@ -2220,6 +2220,23 @@ class Query(BaseExpression):\n                         restricted = select_related_descend(\n                             field, restricted, requested, select_mask, reverse=True\n                         )\n+                        # For reverse OneToOneField relations, apply deferred field restrictions\n+                        if restricted and field.one_to_one and field.remote_field:\n+                            # Get the related model's opts\n+                            related_model = field.related_model\n+                            related_opts = related_model._meta\n+                            \n+                            # Build the prefix for this relation's deferred fields\n+                            if cur_depth:\n+                                deferred_prefix = \"__\".join(chain[1:cur_depth + 1])\n+                            else:\n+                                deferred_prefix = field.related_query_name()\n+                            \n+                            # Get deferred fields for this relation\n+                            deferred_for_relation = {\n+                                f.name for f in related_opts.concrete_fields\n+                                if f\"{deferred_prefix}__{f.name}\" in self.deferred_loading[0]\n+                            }\n                     else:\n                         restricted = select_related_descend(\n                             field, restricted, requested, select_mask, reverse=False",
  "attempts": 1,
  "success": true,
  "error": null,
  "timestamp": "2026-01-05T19:27:29.410099"
}