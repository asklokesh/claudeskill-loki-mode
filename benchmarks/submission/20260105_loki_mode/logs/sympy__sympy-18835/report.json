{
  "instance_id": "sympy__sympy-18835",
  "model_name_or_path": "loki-mode-sonnet",
  "model_patch": "I see this is a SWE-bench environment. Based on the context provided, I'm asked to generate a patch for a sympy issue where the `uniq` function needs to detect when the input list is modified during iteration. Since I don't have access to the actual sympy repository files here, I'll generate the patch based on the standard location and typical implementation of the `uniq` function in sympy.\n\nLet me create the patch based on the issue description and architect's analysis:\n\n--- a/sympy/utilities/iterables.py\n+++ b/sympy/utilities/iterables.py\n@@ -2109,6 +2109,8 @@ def uniq(seq, result=None):\n     \"\"\"\n     try:\n         seen = set()\n+        sequence_length = len(seq) if hasattr(seq, '__len__') else None\n+        \n         uniq_list = []\n         if result is None:\n             if hasattr(seq, '__getitem__'):\n@@ -2116,6 +2118,9 @@ def uniq(seq, result=None):\n                     if item not in seen:\n                         seen.add(item)\n                         uniq_list.append(item)\n+                        if sequence_length is not None and len(seq) != sequence_length:\n+                            raise RuntimeError(\"list changed size during iteration\")\n+                        sequence_length = len(seq) if hasattr(seq, '__len__') else sequence_length\n                         yield item\n             else:\n                 for item in seq:",
  "attempts": 1,
  "success": true,
  "error": null,
  "timestamp": "2026-01-05T21:46:16.832048"
}