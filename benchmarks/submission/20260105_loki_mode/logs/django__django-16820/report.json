{
  "instance_id": "django__django-16820",
  "model_name_or_path": "loki-mode-sonnet",
  "model_patch": "--- a/django/db/migrations/operations/models.py\n+++ b/django/db/migrations/operations/models.py\n@@ -733,6 +733,30 @@ class AlterIndexTogether(AlterTogetherOptionOperation):\n     def references_field(self, model_name, name, app_label):\n         return self.references_model(model_name, app_label) and (\n             not self.option_value\n             or any((name in fields) for fields in self.option_value)\n         )\n \n+    def reduce(self, operation, app_label):\n+        if isinstance(operation, AddIndex) and self.model_name_lower == operation.model_name_lower:\n+            if self.option_value:\n+                # Check if AddIndex replaces one of the index_together entries\n+                index = operation.index\n+                # Only consider simple indexes (no conditions, includes, etc.)\n+                if (\n+                    index.fields\n+                    and not getattr(index, 'condition', None)\n+                    and not getattr(index, 'include', None)\n+                    and not getattr(index, 'opclasses', ())\n+                    and not getattr(index, 'expressions', None)\n+                ):\n+                    index_fields = tuple(index.fields)\n+                    if index_fields in self.option_value:\n+                        new_option_value = self.option_value - {index_fields}\n+                        if not new_option_value:\n+                            # All index_together entries have been converted to indexes\n+                            return [operation]\n+                        return [\n+                            AlterIndexTogether(self.name, new_option_value),\n+                            operation,\n+                        ]\n+        return super().reduce(operation, app_label)\n+\n \n class AlterOrderWithRespectTo(ModelOptionOperation):",
  "attempts": 1,
  "success": true,
  "error": null,
  "timestamp": "2026-01-05T19:26:05.201595"
}